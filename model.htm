<!DOCTYPE html>
<html>
<head>
<title>EpiML - HCV model</title>
<meta http-equiv="x-ua-compatible" content="ie=edge" > <!-- To use the latest IE version in HTA apps http://stackoverflow.com/questions/19567887/javascript-version-in-hta -->

<!-- Loading interface CSS -->
<link rel="stylesheet" type="text/css" href="css/button.css">
<link rel="stylesheet" type="text/css" href="css/menu.css">
<link rel="stylesheet" type="text/css" href="css/mainarea.css">
<link rel="stylesheet" type="text/css" href="css/parameter.css">
<link rel="stylesheet" type="text/css" href="css/plot.css">

<!-- Loading interface javascript -->
<script type="text/javascript" src="interface/paramdisplay.js"></script>
<script type="text/javascript" src="interface/initialise.js"></script>
<script type="text/javascript" src="interface/jquery/jquery.js"></script>
<script type="text/javascript" src="interface/jquery/jquery.flot.js"></script>
<script type="text/javascript" src="interface/jquery/jquery.flot.axislabels.js"></script> <!-- http://www.pikemere.co.uk/blog/flot-tutorial-how-to-create-area-charts/ -->
<script type="text/javascript" src="interface/jquery/jquery.flot.stack.js"></script>
<script type="text/javascript" src="interface/jquery/jquery.flot.resize.js"></script>
<script type="text/javascript" src="interface/plotstyles.js"></script>
<script type="text/javascript" src="interface/multicoresim.js"></script>
<script type="text/javascript" src="interface/papaparse.js"></script>
<script type="text/javascript" src="interface/json2.js"></script><!-- Required for use in internet explorer based browsers -->
<script type="text/javascript" src="interface/csvtools.js"></script>
<script type="text/javascript" src="interface/interfacebuttons.js"></script>
<script type="text/javascript" src="interface/blob/blob.js"></script>
<script type="text/javascript" src="interface/filesaver/filesaver.js"></script>
<script type="text/javascript" src="interface/fullscreen.js"></script>

<!-- Loading methods that are used in the model -->
<script type="text/javascript" src="model/simulationtools.js"></script>
<script type="text/javascript" src="model/mathtools.js"></script>
<script type="text/javascript" src="model/lcgrand.js"></script> <!-- no longer used - in mathtools now as Rand() random number generator to ensure platform independence -->
<script type="text/javascript" src="model/parameter.js"></script>
<script type="text/javascript" src="model/simulationbuttons.js"></script>
<script type="text/javascript" src="model/stochasticoptimisation.js"></script>

<!-- Loading model javascript -->
<script type="text/javascript" src="model/simulation.js"></script>
<script type="text/javascript" src="model/person.js"></script>
<script type="text/javascript" src="model/hcv.js"></script>
<script type="text/javascript" src="model/hiv.js"></script>
<script type="text/javascript" src="model/generalmortality.js"></script>




<!-- Loading HCVTest stuff javascript -->
<script type="text/javascript" src="model/hcvtest.js"></script>
<script type="text/javascript" src="interface/tablemaker.js"></script>


<!-- Loading testing functions (to be deleted) -->
<script type="text/javascript" src="test/testmulticoresim.js"></script>


<script>
//This is testing for various code that will be used very soon
var TestObject={"name":"binchen"};
TestString=JSON.stringify(TestObject);
NewTestObject=JSON.parse(TestString);

//Testing the Papa.parse
var ResultsHolder;
Papa.parse("data/summarynotifications.csv", {download: true, complete: function(results) {ResultsHolder=results;}});

</script>
</head>



<body onload="InitialisePage()">

<img src="img/logo.png">

<progress id="MainProgress" value="0.0" max="1"></progress>

<div id="menu">
<ul>
<li><level1 id="HomeMenuItem"  		onclick="ShowMenu(HomeContent);"		>Home</level1></li>
<li><level1 id="ParameterMenuItem" 	onclick="ShowMenu(ParameterContent);"	>Parameters</level1></li>
<li><level1 id="HCVMenuItem" 		onclick="ShowMenu(HCVContent);"			>HCV</level1></li>
<li><level1 id="DataMenuItem" 		onclick="ShowMenu(DataContent);"		>Data</level1></li>
<li><level1 id="PlotsMenuItem" 		onclick="ShowMenu(PlotsContent);"		>Plots</level1></li>
<li><level1 id="MapsMenuItem" 		onclick="ShowMenu(MapsContent);"		>Maps</level1></li>
<li><level1 id="SensitivityMenuItem"onclick="ShowMenu(SensitivityContent);"	>Sensitivity Analysis</level1></li>
<li><level1 id="SettingsMenuItem" 	onclick="ShowMenu(SettingsContent);"	>Settings</level1></li>
<li><level1 id="OtherMenuItem" 		onclick="ShowMenu(OtherContent);"		>Other</level1></li>
<li><level1 id="HelpMenuItem" 		onclick="ShowMenu(HelpContent);"		>Help</level1></li>

</ul>
</div>

<div id="MainArea">
	<div id="HomeContent" class="Content">
		<h1>Home</h1>
		<p> This model is a work in progress. The results have not yet been confirmed. Please contact jjansson@kirby.unsw.edu.au for enquiries. </p>
		<p> Opening files in this app does not upload the data to the server.  </p>
		
		<p>Below are the early stages of the full simulation</p>
		<div id="RunSimButton" class="SolidButton" onClick="RunSim()"> Run simulation </div>
		<p>Below are the early stages of the full simulation</p>
		<div id="PlotFibrosisButton" class="SolidButton" onClick="NotificationSimPlot();DxUDxSimPlot();"> Plot Fibrosis </div>
		
		<div class="plot" id="plot1" >
			<div class="fullscreenbox" id="plot1_fullscreenbox" >
				<div class="fullscreenbutton" title="Fullscreen" id="plot1_fullscreenbutton" onclick="ToggleFullScreen('plot1_fullscreenbox');">&#10063</div>
				<div class="downloadbutton" title="Download data" onclick="plot1_data.Download();">&#x21E9;</div>
				
				<div class="plot_positioner">
					<div id="HCVTestPlotHolder" class="plot_placeholder"></div>
				</div>
				<div class="xlabel">Year</div>
				<div class="ylabel"><div class="rotate">Y Axis Label</div></div>
			</div>
		</div>
		
		<div class="plot-container">
			<div id="HCVTestPlotHolder2" class="plot_placeholder"></div>
		</div>
		<div id="HCVResultsTable"></div>		

		<div class="plot-container">
			<div id="DxUDxPlotHolder" class="plot_placeholder"></div>
		</div>
		<div id="DxUDxResultsTable"></div>
		
	</div>

	<div id="ParameterContent" class="Content">
		<h1>Parameters</h1>
		In this section, parameters are built up. 
		<div class="SolidButton" onClick="SaveParameters();">Save parameters</div>
	</div>
	
	<div id="HCVContent" class="Content">
		<h1>HCV</h1>
		<div id="HCVParamHolder"> </div>
	</div>
	
	<div id="DataContent" class="Content">
		<h1>Data</h1>
		The buttons below currently are only a testing are for the CSV read
		<div class="SolidButton" onClick="LoadNotificationData();">Load Notification Data</div>
		<div class="SolidButton" onClick="SummaryNotificationsCSV=new CSVFile('data/summarynotifications.csv');">OLD Load Notification Data</div>
		<div class="SolidButton" onClick="SummaryNotificationsTable=SummaryNotificationsCSV.GetValues(2, 10, 1, 5); TimeAxis=[];for(i=0; i<5; i++){TimeAxis[i]=2008+i;}">Extract data</div>
		<div class="SolidButton" onClick="StackedLinePlot('#NotificationPlotHolder', TimeAxis, SummaryNotificationsTable,  'Year','Number of notifications');">Line Plot</div>
		<div class="SolidButton" onClick="StackedBarPlot('#NotificationPlotHolder', TimeAxis, SummaryNotificationsTable,  'Year','Number of notifications');">Bar Plot</div>
		
		
		<div style="float:left; position:absolute; left:200px; top: 0px;">
			<div class="plot-container">
				<div id="NotificationPlotHolder" class="plot_placeholder"></div>
			</div>
		</div>
	</div>
	
	<div id="PlotsContent" class="Content">
		<h1>Plots</h1>
		
		<p>Fibrosis Progression</p>
		<form class="ParamContainer" id="F0F1"> 
			<input type="text" name="paramname" value="F0F1"> 
			<select name="DistributionType" onchange=";">
				<option value="Normal">Normal</option>
				<option value="LogNormal">Log Normal</option>
				<option value="NormalProbability">Normal Probability</option>
			</select>
			Median <input type="text" name="Median"> 
			SD <input type="text" name="SD"> 
			<a onClick="ToggleDisplay(this, 'ParamInfoBox');">+ More info</a>
			<div class="ParamInfoBox" style="display: none;"> Some info to display </div>
		</form>
		
		<form class="ParamContainer" id="F1F2"> 
			<input type="text" name="paramname" value="F1F2"> 
			<select name="DistributionType" onchange=";">
				<option value="Normal">Normal</option>
				<option value="LogNormal">Log Normal</option>
				<option value="NormalProbability">Normal Probability</option>
			</select>
			Median <input type="text" name="Median"> 
			SD <input type="text" name="SD"> 
			<a onClick="ToggleDisplay(this, 'ParamInfoBox');">+ More info</a>
			<div class="ParamInfoBox" style="display: none;"> Some info to display </div>
		</form>
		
		
		
		<div class="SolidButton" onClick="ToggleDisplay(this, 'HCVPlotArea');">Show plot</div>
		<div class="HCVPlotArea" style="position:relative; display: none;">
			<div id="HCVTestSimButton" 	class="SolidButton" onClick="HCVTest();"> Run simulation </div>
			<div id="HCVTestPlotButton" class="SolidButton" onClick="HCVTestPlot();"> Plot result </div>
			<div id="GeneralisedButtonForPlots" class="SolidButton" onClick="StackedLinePlot('#HCVTestPlotHolder', TimeAxis, SimResult[0].HCVTestResult, 'Time (years)','Number Of People');"> Plot result </div>
			<div id="HCVResultsSection"  style="float:left; position:absolute; left:200px; top: 0px;">
			
				<div class="plot-container">
					<div id="HCVTestPlotHolder" class="plot_placeholder"></div>
				</div>
			<div id="HCVResultsTable"></div>
			</div>
		</div>
		
	</div>
	
	<div id="MapsContent" class="Content">
		<h1>Maps</h1>
		<p>Maps will be placed on this page.</p>
	</div>	
	<div id="SensitivityContent" class="Content">
		<h1>Sensitivity Analysis</h1>
		<p>The purpose of this section is to demonstrate the correlation between input parameters and output aggregate statistics.</p>
		<p>The user will select the parameter to inspect and the result to compare with. Scatter plot will be produced, and a correlation plot will be superimposed.</p>
		<p>There will also be the option to select an output and get a comparison of many different parameters to inspect. A cyclone plot will indicate the impact that the 95% range has on the outcome of the variable.</p>
	</div>
	
	
	<div id="SettingsContent" class="Content">
		<h1>Settings</h1>
		<form>
			<p>Number of cores to use for simulations</p>
			<select name="NoCoresDropdown" onchange="NoCores=this.value;">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
			</select>
			
			<p>Number of simulations to maintain concurrently.</p>
			<select name="ConcurrentSimsDropdown" onchange="ConcurrentSims=this.value;">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
				<option value="6">6</option>
				<option value="7">7</option>
				<option value="8">8</option>
			</select>
			
		</form>

	</div>
	
	
	<div id="OtherContent" class="Content">
		<p>Testing the multicoresim system</p>
		<p>Warning: this process may occupy a large amount of RAM and CPU power</p>
		<div id="HCVTestSimButton" 	class="SolidButton" onClick="TestMulticoreSim()"> Run simulation </div>
		
		<div id="HCVRunNotificationsButton" class="SolidButton" onClick="TestMulticoreSim()"> Run simulation </div>
		
		<div class="plot-container">
			<div id="PlotHolder" class="plot_placeholder"></div>
		</div>

		
		
	</div>

	<div id="HelpContent" class="Content">
		<h1>Help</h1>
		<p>This system can be used either through the internet or locally through the Chrome browser. To get this to work locally on your browser, you need to install a local http server. One suggestion is <a href="https://code.google.com/p/mongoose/">Mongoose</a>. A list of executable files can be found <a href="https://code.google.com/p/mongoose/downloads/list?can=4&q=windows">here</a>. Another alternative is a Chrome extenstion that can be found <a href=" https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=en">here.</a></p>
		
	</div>


</div>



<script>



</script>
<script type="text/javascript" src="interface/menu.js"></script>

</body>
</html>